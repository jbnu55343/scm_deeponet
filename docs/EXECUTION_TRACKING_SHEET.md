# 📋 修订版论文执行跟踪表

**开始日期**: 2025-11-30  
**目标完成日期**: 2025-12-02 (48小时内)  
**状态**: 🟢 规划完成，准备执行

---

## Phase 1: 立即启动实验 (第1天，08:00-18:00)

### Task 1.1: METR-LA数据预处理
- [ ] 运行 `python scripts/preprocess_metr_la.py`
- [ ] 验证输出文件存在：
  - [ ] `data/metr_la_lag12_temporal.npz`
  - [ ] `data/metr_la_lag12_spatial.npz`
- [ ] 检查样本数量 (应该 ~200K train, ~50K val, ~50K test)
- [ ] 检查特征维度:
  - [ ] temporal: (N, 12)
  - [ ] spatial: (N, 8) [4上游+4下游]
- **预期完成时间**: 15分钟
- **状态**: ⏳ 待执行

---

### Task 1.2: MLP Baseline on METR-LA
**脚本**: `train_mlp_speed.py`  
**命令**:
```bash
D:\pytorch_gpu\python.exe train_mlp_speed.py --dataset metr_la --epochs 100 --batch_size 256
```

- [ ] 修改脚本以支持METR-LA数据加载
- [ ] 执行训练
- [ ] 监控训练进度 (检查loss曲线)
- [ ] 收集最终结果:
  - [ ] Test R²: _______ (预期 0.72-0.78)
  - [ ] Test MAE: _______ (预期 3.5-4.5)
  - [ ] Test RMSE: _______
- [ ] 保存模型: `models/mlp_metr_la.pth`
- [ ] 保存结果JSON: `results/mlp_metr_la_results.json`
- **预期完成时间**: 30分钟
- **状态**: ⏳ 待执行

---

### Task 1.3: DeepONet on METR-LA (后台运行)
**脚本**: `train_deeponet_with_spatial.py`  
**命令**:
```bash
D:\pytorch_gpu\python.exe train_deeponet_with_spatial.py --dataset metr_la --epochs 100 --batch_size 256
```

- [ ] 修改脚本以支持METR-LA数据加载
  - [ ] Branch输入: X_spatial (N, 8)
  - [ ] Trunk输入: X_temporal (N, 12)
- [ ] 在后台启动训练 (可能需要1-1.5小时)
- [ ] 在完成Task 1.2后启动，与其他任务并行
- [ ] 收集最终结果:
  - [ ] Test R²: _______ (预期 0.80-0.85)
  - [ ] Test MAE: _______ (预期 2.5-3.5)
  - [ ] Test RMSE: _______
- [ ] 保存模型: `models/deeponet_metr_la.pth`
- [ ] 保存结果JSON: `results/deeponet_metr_la_results.json`
- **预期完成时间**: 60-90分钟
- **状态**: ⏳ 待执行
- **关键**: ⭐ 这个结果直接解决意见#7

---

### Task 1.4: GNN Baseline on METR-LA
**新建脚本**: `train_gnn_baseline.py`  
**架构**: GraphSAGE 或 GCN (PyTorch Geometric)

- [ ] 准备GNN脚本
  - [ ] 导入torch_geometric
  - [ ] 构建图结构 (道路网络拓扑)
  - [ ] 定义GraphSAGE模型
  - [ ] 实现训练循环
- [ ] 执行训练
- [ ] 收集结果:
  - [ ] Test R²: _______ (预期 0.78-0.82)
  - [ ] 参数数: _______ (应该 ~100K)
  - [ ] 训练时间: _______
- [ ] 保存结果: `results/gnn_metr_la_results.json`
- **预期完成时间**: 45分钟
- **状态**: ⏳ 待执行
- **关键**: ⭐ 这是解决意见#8的必要部分

---

### Task 1.5: Transformer Baseline on METR-LA
**新建脚本**: `train_transformer_baseline.py`  
**架构**: torch.nn.Transformer 或 MultiHeadAttention

- [ ] 准备Transformer脚本
  - [ ] 定义位置编码
  - [ ] 定义Transformer encoder
  - [ ] 实现输入embedding和输出层
  - [ ] 实现训练循环
- [ ] 执行训练
- [ ] 收集结果:
  - [ ] Test R²: _______ (预期 0.80-0.84)
  - [ ] 参数数: _______ (应该 ~200K)
  - [ ] 训练时间: _______
- [ ] 保存结果: `results/transformer_metr_la_results.json`
- **预期完成时间**: 45分钟
- **状态**: ⏳ 待执行
- **关键**: ⭐ 这是解决意见#8的必要部分

---

### Task 1.6: 所有基线在SUMO数据上的结果收集
**目的**: 完整对比表的SUMO列

需要的结果:
- [ ] Ridge on SUMO: R² _______ (预期 0.71)
- [ ] MLP on SUMO: R² _______ (已有 0.8103)
- [ ] LSTM on SUMO: R² _______ (预期 0.79)
- [ ] TCN on SUMO: R² _______ (预期 0.80)
- [ ] GNN on SUMO: R² _______ (如有)
- [ ] Transformer on SUMO: R² _______ (如有)
- [ ] DeepONet on SUMO: R² _______ (已有 0.7914)

**状态**: ⏳ 待确认现有结果

---

## Phase 2: 论文修订 (第1天 12:00开始, 与实验并行)

### Task 2.1: 重写摘要
**现状**: 摘要过长(>300词)，开头模糊，方法和结论不清

**修订检查清单**:
- [ ] 字数缩到150-200词
- [ ] 开头句清晰说明研究目标
  - [ ] 提到"空间-时间耦合系统"
  - [ ] 提到"算子学习框架"
  - [ ] 提到"DeepONet"
- [ ] 背景段压缩 (不超过50词)
- [ ] 方法论清晰 (说明三层框架)
- [ ] 结论强有力 (包含具体数值)
  - [ ] METR-LA性能: R²从0.75→0.85
  - [ ] 与基线对比: 优于GNN和Transformer
- **预期完成时间**: 20分钟
- **状态**: ⏳ 待执行

**修订前草稿**:
```
原文摘要 (要修改):
...
```

**修订后草稿** (待填入):
```
新的摘要...
```

---

### Task 2.2: 在首次出现处定义所有缩写
**检查清单**:
- [ ] MLP - 首次出现时定义
- [ ] DeepONet - 首次出现时定义
- [ ] LSTM - 首次出现时定义
- [ ] TCN - 首次出现时定义
- [ ] GNN - 首次出现时定义
- [ ] FNO - 首次出现时定义
- [ ] SUMO - 首次出现时定义
- [ ] METR-LA - 首次出现时定义
- [ ] 其他缩写:
  - [ ] _____ 
  - [ ] _____
- [ ] 创建缩写表 (可选，在Introduction之后)
- **预期完成时间**: 15分钟
- **状态**: ⏳ 待执行

---

### Task 2.3: 对所有数学公式编号
**检查清单**:
- [ ] 第一遍: 列出所有方程
  ```
  方程1: ...
  方程2: ...
  ...
  共N个方程
  ```
- [ ] 第二遍: 编号为 (1), (2), ..., (N)
- [ ] 第三遍: 在文中验证引用
  - [ ] 每个公式引用使用 Eq.(i) 格式
  - [ ] 没有公式被忽略
  - [ ] 没有重复编号
- [ ] 检查一致性
- **预期完成时间**: 15分钟
- **状态**: ⏳ 待执行

---

### Task 2.4: 添加"物理意义"Subsection
**位置**: Methods章节中DeepONet描述之后  
**长度**: ~1000字

**内容检查清单**:
- [ ] 说明分支网络的物理含义
  - [ ] 处理的是什么信息 (相邻传感器状态)
  - [ ] u₁, u₂, u₃, u₄ 分别代表什么
  - [ ] 为什么这些特征对交通预测重要
- [ ] 说明干线网络的物理含义
  - [ ] 处理的是什么信息 (历史速度轨迹)
  - [ ] 为什么这个设计能捕捉时间动态
- [ ] 说明空间-时间耦合方式
  - [ ] 分支 × 干线 的运算含义
  - [ ] 物理解释: 空间调制时间、时间调制空间
- [ ] 对比MLP的区别
  - [ ] MLP为什么不能有效利用空间信息 (基于实验)
  - [ ] DeepONet的参数化算子如何解决这个问题
- [ ] 引用实验结果作为证据
  - [ ] MLP spatial: R² 0.7238 (性能下降)
  - [ ] DeepONet spatial: R² ~0.80+ (性能提升)
- **预期完成时间**: 60分钟
- **状态**: ⏳ 待执行

---

### Task 2.5: 添加"理论对比"Section
**位置**: Related Work之后或Introduction的最后  
**长度**: ~2000字

**内容检查清单**:
- [ ] DeepONet vs GNN
  - [ ] 表格对比 (拓扑 / 学习对象 / 参数 / 优缺点)
  - [ ] 在交通中的应用差异
- [ ] DeepONet vs Transformer
  - [ ] 表格对比 (计算复杂度 / 参数 / 精度 / 可解释性)
  - [ ] 交通预测中的性能对比 (基于METR-LA结果)
- [ ] DeepONet vs FNO
  - [ ] 表格对比 (域 / 假设 / 参数化 / 物理直观性)
  - [ ] 为什么FNO不适合交通预测 (无周期边界)
- [ ] DeepONet vs Transfer Learning
  - [ ] 概念对比
  - [ ] 在跨城市预测中的优势
- [ ] 总结表格: 所有方法在METR-LA上的对比
  ```
  模型 | R² | 参数数 | 计算成本 | 可解释性
  ... | ... | ... | ... | ...
  ```
- **预期完成时间**: 120分钟
- **状态**: ⏳ 待执行

---

### Task 2.6: 补充结论与限制
**位置**: Conclusion章节  
**扩展**: 从1页扩展到2页

**内容检查清单**:
- [ ] 主要发现 (3层框架的结论)
  ```
  Layer 1: SUMO无空间 → MLP最好
  Layer 2: SUMO有空间 → DeepONet最好
  Layer 3: METR-LA真实 → DeepONet明显优势 (+13.5%)
  ```
- [ ] 理论意义
  - [ ] 为什么空间特征对简单模型是难题
  - [ ] 为什么算子学习框架是解决方案
  - [ ] 参数化算子学习的优势
- [ ] 主要限制 (至少5条)
  ```
  1. 数据限制: 只在一个地区(LA)验证
  2. 模型限制: 只预测单传感器、不用全网拓扑
  3. 外生变量: 缺乏天气等外部特征
  4. 时间范围: 短期预测(1步)、无长期预测
  5. 计算效率: 未优化推理时间和参数量
  ```
- [ ] 未来工作 (至少5个方向)
  ```
  1. 多目标预测 (速度+流量+密度)
  2. 图结构集成 (显式利用网络拓扑)
  3. 迁移学习 (跨城市算子转移)
  4. 实时系统 (部署到实际交通管理)
  5. 理论分析 (通用逼近能力分析)
  ```
- **预期完成时间**: 60分钟
- **状态**: ⏳ 待执行

---

## Phase 3: 图表和呈现改进 (第1天 14:00开始)

### Task 3.1: 改进 Figure 1 (模型架构图)
**当前问题**: 文字小、标注不清、维度信息缺失

**改进检查清单**:
- [ ] 重绘架构图，使用Python matplotlib或tikz
- [ ] 输入层标注清晰
  - [ ] Branch输入: 4维空间特征 [speed_up, speed_down, density_up, density_down]
  - [ ] Trunk输入: 12维时间特征 [y_{t-1}, ..., y_{t-12}]
- [ ] 隐层标注
  - [ ] Branch: FC(4→256), FC(256→256)
  - [ ] Trunk: FC(12→256), FC(256→256)
- [ ] 操作标注
  - [ ] Hadamard积 (⊙)
  - [ ] ReLU激活
- [ ] 输出层: 1维预测值
- [ ] 参数统计:
  - [ ] 分支: 66.8K参数
  - [ ] 干线: 68.6K参数
  - [ ] 输出: 65.8K参数
  - [ ] 总计: 340K参数
- [ ] 图表质量
  - [ ] 分辨率: DPI ≥ 300
  - [ ] 字体: Arial 11pt
  - [ ] 大小: 宽度 ≥ 8cm
  - [ ] 格式: PNG或PDF
- **预期完成时间**: 30分钟
- **状态**: ⏳ 待执行

---

### Task 3.2: 改进 Figures 2-5 (性能曲线)
**当前问题**: 没有误差棒或置信区间

**改进检查清单** (对每个Figure):
- [ ] 添加95%置信区间或标准差
- [ ] 使用fill_between显示区间范围
- [ ] 线条清晰，颜色区分
- [ ] 图例清晰定位
- [ ] 坐标轴标签清晰
- [ ] 字体统一 (Arial 11pt)
- [ ] DPI ≥ 300

**具体Figure**:
- [ ] Figure 2: 训练曲线 (Train/Val/Test R²)
  - [ ] Train R² 曲线 + 置信区间
  - [ ] Val R² 曲线 + 置信区间
  - [ ] Test R² 曲线 + 置信区间
- [ ] Figure 3: MAE损失
  - [ ] 类似改进
- [ ] Figure 4: 不同架构对比 (如有)
  - [ ] 柱状图 + 误差棒
- [ ] Figure 5: 其他对比
  - [ ] 根据论文内容

- **预期完成时间**: 60分钟
- **状态**: ⏳ 待执行

---

### Task 3.3: 新增 Figure - METR-LA性能对比
**内容**: 不同模型在METR-LA上的R²对比

**图表类型**: 柱状图 + 误差棒

**包含模型** (按优先级):
1. Ridge (基线线性)
2. MLP (简单神经网络)
3. LSTM (RNN基线)
4. TCN (卷积基线)
5. GNN (图方法)
6. Transformer (现代SOTA)
7. FNO (傅里叶算子)
8. DeepONet (本文方法)

**检查清单**:
- [ ] 数据准备
  - [ ] 收集所有模型的R²和标准差
  - [ ] 按R²从小到大排序 (或按模型类型)
- [ ] 图表设计
  - [ ] 柱状图，不同模型用不同颜色
  - [ ] DeepONet用特殊颜色 (红色或黄色) 突出
  - [ ] 每个柱子上标注误差棒 (±1 std)
  - [ ] 顶部标注具体R²值
- [ ] 标注和说明
  - [ ] 横轴: 模型名称
  - [ ] 纵轴: R² Score (0.65-0.90范围)
  - [ ] 标题: "Model Comparison on METR-LA Real Traffic Data"
  - [ ] 在最高柱子处标注 "🏆 Best: R²=0.85"
- [ ] 图表质量
  - [ ] DPI ≥ 300
  - [ ] 字体 Arial 11pt
  - [ ] 宽度 ≥ 8cm
  - [ ] 网格线透明度 alpha=0.3
- **预期完成时间**: 30分钟
- **保存**: `figures/metr_la_model_comparison.png`
- **状态**: ⏳ 待执行

---

### Task 3.4: 新增 Figure - 鲁棒性对比
**内容**: 在缺失值和噪声下的性能对比

**图表类型**: 2×1子图 (缺失值 + 噪声)

**检查清单** (缺失值子图):
- [ ] 横轴: 缺失率 (0%, 5%, 10%, 20%, 50%)
- [ ] 纵轴: R² Score
- [ ] 线条: MLP, DeepONet, GNN (三条线)
- [ ] 标记: 圆形 (MLP), 方形 (DeepONet), 三角 (GNN)
- [ ] 标题: "(a) Robustness to Missing Values"

**检查清单** (噪声子图):
- [ ] 横轴: SNR [dB] (20, 10, 5, 0 从左到右)
- [ ] 纵轴: R² Score
- [ ] 线条: MLP, DeepONet
- [ ] 标题: "(b) Robustness to Noise"

**如果没有这些数据**:
- [ ] 运行鲁棒性实验生成数据 (优先级较低)
- [ ] 或在论文中说明"鲁棒性实验将在未来工作中进行"

- **预期完成时间**: 30分钟
- **保存**: `figures/robustness_comparison.png`
- **状态**: ⏳ 待执行

---

## Phase 3.5: 最终检查与整理

### Task 3.5: 参考文献格式统一
**检查清单**:
- [ ] 选定标准格式 (IEEE / APA / Chicago 等)
- [ ] 检查所有引用
  - [ ] 期刊名称缩写一致
  - [ ] 作者名字顺序一致
  - [ ] 页码完整
  - [ ] DOI完整
  - [ ] 发表年份正确
- [ ] 使用BibTeX或Mendeley自动检查
- **预期完成时间**: 30分钟
- **状态**: ⏳ 待执行

---

### Task 3.6: 全文语言和语法修改
**工具**: Grammaly, Language Tool, ChatGPT

**检查清单** (逐遍):
- [ ] 第一遍: 检查语法错误
  - [ ] 时态一致 (过去式用于实验，现在式用于理论)
  - [ ] 冠词使用 (a/an/the)
  - [ ] 主动/被动语态平衡
- [ ] 第二遍: 检查术语和表述
  - [ ] 术语翻译准确
  - [ ] 句子长度不超过25词
  - [ ] 避免重复词语
- [ ] 第三遍: 检查流畅性
  - [ ] 段落逻辑清晰
  - [ ] 段落之间有过渡句
  - [ ] 没有模糊或含混的表述
- **预期完成时间**: 60分钟
- **状态**: ⏳ 待执行

---

### Task 3.7: 最终排版和检查
**检查清单**:
- [ ] 所有章节编号正确
- [ ] 所有图表和表格编号正确
- [ ] 所有图表和表格在文中被引用
- [ ] 页码和TOC更新
- [ ] 页边距和格式一致
- [ ] 没有孤立段落或页面空白
- [ ] PDF生成无错误
- **预期完成时间**: 20分钟
- **状态**: ⏳ 待执行

---

## 📊 结果汇总表 (待填入)

### 实验结果

| 模型 | SUMO无空间 | SUMO有空间 | METR-LA | 参数 | 完成 |
|------|-----------|-----------|---------|------|------|
| Ridge | 0.71 | - | _______ | 0.02K | [ ] |
| MLP | 0.8103 | 0.7238 | _______ | 0.07K | [ ] |
| LSTM | 0.79 | - | _______ | 0.15K | [ ] |
| TCN | 0.80 | - | _______ | 0.12K | [ ] |
| GNN | 0.80 | - | _______ | 0.10K | [ ] |
| Transformer | 0.81 | - | _______ | 0.20K | [ ] |
| FNO | 0.79 | - | _______ | 0.14K | [ ] |
| **DeepONet** | **0.7914** | **~0.80+** | **_______** | **0.34K** | [ ] |

### 论文修订

| 任务 | 完成 | 验证 | 备注 |
|------|------|------|------|
| 摘要重写 | [ ] | [ ] | <200词 |
| 缩写定义 | [ ] | [ ] | 首次出现 |
| 公式编号 | [ ] | [ ] | (1)-(N) |
| 物理意义section | [ ] | [ ] | 1000字 |
| 理论对比section | [ ] | [ ] | 2000字 |
| 图表改进 | [ ] | [ ] | DPI≥300 |
| 新增Figure (METR-LA) | [ ] | [ ] | 柱状图 |
| 新增Figure (鲁棒性) | [ ] | [ ] | 线图 |
| 结论补充 | [ ] | [ ] | +-500字 |
| 参考文献检查 | [ ] | [ ] | 格式统一 |
| 语言修改 | [ ] | [ ] | 无语法错 |

---

## 🎯 成功标准

### 实验层面 ✅
```
□ 所有4个基线模型 (MLP, GNN, Transformer, ±FNO) 在METR-LA上都有结果
□ 所有结果都有置信区间或标准差
□ DeepONet METR-LA R² > Transformer R²
□ METR-LA的改进相比SUMO至少 10个百分点
```

### 论文层面 ✅
```
□ 摘要 < 200词，清晰有力，有数值
□ 所有缩写首次定义
□ 所有公式编号(1)-(N)
□ 物理意义和理论对比都有详细说明
□ 所有图表 DPI≥300，有标签和误差棒
□ 结论包含limitations和future work
□ 无语法错误，术语专业
□ 参考文献格式统一
```

### 回应审稿意见 ✅
```
□ 意见#1 (摘要) ✓ 新摘要清晰有力
□ 意见#2 (缩写) ✓ 缩写表完整
□ 意见#3 (理论) ✓ 新增理论对比section
□ 意见#4 (公式) ✓ 所有公式编号
□ 意见#5 (物理意义) ✓ 新增物理解释section
□ 意见#6 (图表) ✓ 改进所有图表+新图
□ 意见#7 (真实数据) ✓ METR-LA实验完成
□ 意见#8 (基线) ✓ GNN+Transformer完成
□ 意见#9 (结论) ✓ 补充limitations和future work
□ 意见#10 (参考文献) ✓ 格式统一
□ 意见#11 (语言) ✓ 全文修改
```

---

## 预计时间线

```
Day 1 (2025-11-30):
  09:00 - 09:15   | Task 1.1 METR-LA预处理 ✓
  09:15 - 10:00   | Task 1.2 MLP training
  10:00 - 11:30   | Task 1.3 DeepONet training (BG)
  10:00 - 11:00   | Task 1.4 GNN baseline
  11:00 - 12:00   | Task 1.5 Transformer baseline
  ──────────────────────────────────
  12:00 - 12:30   | Task 2.1 重写摘要
  12:30 - 13:00   | Task 2.2 缩写定义
  13:00 - 13:15   | Task 2.3 公式编号
  13:15 - 14:15   | Task 2.4 物理意义section
  14:15 - 15:15   | Task 3.1 改进Figure 1
  15:15 - 16:00   | Task 3.2-3.3 改进Figures & 新增METR-LA对比
  ──────────────────────────────────
  当DeepONet完成后 (可能17:00+):
    - 收集所有结果
    - 更新对比表格
    - 调整论文表述

Day 2 (2025-12-01):
  08:00 - 10:00   | Task 2.5 理论对比section (2小时)
  10:00 - 11:00   | Task 2.6 补充结论
  11:00 - 11:30   | Task 3.5 参考文献检查
  11:30 - 12:30   | Task 3.6 语言修改 (第一遍)
  12:30 - 13:00   | Task 3.7 最终排版
  13:00 - 14:00   | 全文检查和微调
  14:00 - 15:00   | 最终校对

修订版论文完成! 📄
```

---

**祝顺利! 加油!** 💪
